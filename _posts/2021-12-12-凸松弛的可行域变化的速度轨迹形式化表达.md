---
layout: post
title: 列车节能运控优化中凸松弛的速度轨迹形式化表达
description: 在前面的文章中，我们提到了在列车运控优化中，引入两个松弛约束——将原有问题的等号约束转变为不等号约束，通过将原有问题的可行域从非凸域转变为凸域。在这篇文章中，我们将利用速度轨迹的形式化表达来看看这一问题，重点看看当将原有问题进行凸松弛之后，对速度轨迹本身会产生什么样的影响。本文也尝试回答一个问题，是否存在一个松弛域内的可行解，其对应的非松弛解不再原有问题的可行域内呢？
permalink: /blog/convex_2/
date: 2021-12-12
category: featured
tag:
- academic
- optimal train control
- constraints relaxation
- convex optimization
---

![Quadratic Function](/images/blog/Quadratic-Function.png "Quadratic Function")
# 前言
在前面的文章中，我们提到了在列车运控优化中，引入两个松弛约束——将原有问题的等号约束转变为不等号约束，通过将原有问题的可行域从非凸域转变为凸域。在这篇文章中，我们将利用速度轨迹的形式化表达来看看这一问题，重点看看当将原有问题进行凸松弛之后，对速度轨迹本身会产生什么样的影响。本文也尝试回答一个问题，是否存在一个松弛域内的可行解，其对应的非松弛解不再原有问题的可行域内呢？

# 松弛后的速度轨迹形式化表达
![Speed trajectory updates with relaxation](/images/blog/convex_relax_speed.png "Speed trajectory updates with relaxation")

如上图所示，假设在模型松弛前，其速度轨迹用红色的折线表达；松弛后对应的速度轨迹用绿色折线表达。两种速度轨迹分别对应各自在不同距离区间的平均速度和各自的速度点。用$$v_{ave,i}$$和$$v^{'}_{ave,i}$$ 分别表示松弛前和松弛后在不同距离区间的平均速度。

如果红色折线为在原有问题条件下的某一个可行解，也即$$\alpha_i=1/v_{ave,i}$$, $$\beta_i=v_i^2$$，我们用“**原有解**”来表示；那么绿色的折线为松弛过后的某一可行解，我们用“**松弛解**”来表示。同时为了便于论述，我们把和$$\alpha_i$$相关的这类松弛约束成为“**约束一**”，和$$\beta_i$$相关的这类约束称为“**约束二**”。

$$
\begin{equation}
\label{eq:max_force_const}
-P_{max}\alpha_i \leq F_i \leq P_{max}\alpha_i
\end{equation}
$$

我们探讨在原有解到松弛解的过程中需要满足什么条件。首先，松弛解和原有解分别都需要满足共同一组$$\alpha_i$$下所决定的时间约束$$\sum_i \Delta d \alpha_i=T$$。再次，需要满足最大功率和最大牵引制动力带来的约束，这部分约束也需要和$$\alpha_i$$一起决定。这部分约束由式\eqref{eq:max_force_const}来定义。这部分约束确保了速度的增加和减少必须满足基本的约束，这部分约束由一组$$\alpha_i$$来定义。最后，如果把约束二也同时考虑进去，其约束的松弛可以不必通过改变速度轨迹，而直接增加$$\beta_i$$这一变量，这个松弛并不影响模型的其他约束和变量，只会带来最后目标函数值的上升。可以看出，不论速度点如何变化，当进行约束一的松弛时候，速度轨迹上升带来目标函数值的上升，而进行约束二松弛的时候，速度轨迹本身不变，但是目标函数值的继续上升.这一观察，我们会在后续文章中探讨。

由上面的讨论还可以看出，一组原有解对应在松弛域中的多个可行解，进而将原有的可行域扩到到松弛域中来。而换言之，某一个松弛解一定能够找到其对应的原有解。因此，也就不存在一个松弛解在进行收敛之后，找不到一组原有解与其对应的可能。这一点在进行论证和说明的时候是比较重要的。

# 松弛条件的处理
针对另外一个松弛约束$$\beta_i\geq v_i^2$$, 我们可能会有类似的疑问，那就是为什么对于这个约束的松弛，我们更希望去增加$$\beta_i$$而不是减少$$v_i$$来实现呢？要回答这个问题，首先看看将怎么证明在取得最优解的时候，松弛的约束被收敛（取等号）。需要假定一种一个松弛约束的变量和其他的中间变量被固定，不论被固定时候是否收敛，然后去证明在另外一个松弛约束被松弛的时候，总是比没有取得收敛的时候更差，那么可以证明在任何情况下，最优解都希望能够取收敛（取等式），而非取松弛。如果理解了这个目标，我们下面看看应该怎么处理才能确保除了一个松弛约束的变化的前提下，保持其他变量都不变。

当约束一存在的时候，$$v_i^2$$是不能轻易变化的，否则就会影响平均速度。为了避免两个约束在论证的时候产生冲突，尽量在创造松弛的时候，尽量不去影响另外一个约束和其他无关变量。所以，采取的策略是在研究$$\alpha_i$$的时候假定保持$$\beta_i$$保持$$v_i^2$$这一约束，然后看看如果所关心的约束松弛带来的状况会有什么情况发生。因此，当研究$$\beta_i \geq v_i^2$$这一松弛的时候，将$$\beta_i$$的值增加，而保持$v_i^2$这个变量不变。

# 小结
在本文中，我们介绍了两个凸优化过程中引入的松弛化方法，探讨了松弛后对可行域带来的变化。探讨了可行域在优化问题的松弛过程中，速度点的物理约束依然存在，但是却无法保证其他物理变量的物理含义，由此需要确保松弛条件在优化过程中必须被强制满足，确保还原优化问题的物理含义。 那么，如果一定存在任何某两组解，一个为未松弛条件下取得，一个为松弛条件下取得，例如松弛了某些等式约束为不等式，是否可以保证，只要存在一组松弛约束，其对应的这组解一定比起对应的未松弛条件下取得的解更差呢？如果是的话，则可以证明，不存在一组最优解可以在松弛条件取得，进而证明最优解一定在等式条件下取得。

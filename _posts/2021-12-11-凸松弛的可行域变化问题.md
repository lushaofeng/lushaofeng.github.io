---
layout: post
title: 列车节能运控优化中凸松弛的可行域变化问题
description: 在列车节能运控中，如果我们打算构建一个凸松弛优化问题，我们需要将原来的非图的约束进行松弛，将原有的可行域松弛为凸优化的可行域。这个过程我们称之为凸松弛。如果能够确保凸松弛之后，最优解能够和原问题保持一致，我们则可以用凸优化的方法对松弛的问题进行解算，大大提高计算效率，并确保解的质量。
permalink: /blog/convex_1/
date: 2021-12-11
category: featured
tag:
- academic
- optimal train control
- convex optimization
---

![High Speed Trains](/images/blog/HSR_1_comp.png "High Speed Trains")

# 前言
近期，我们在尝试利用凸优化来解决现有的列车节能运控的优化问题。除了之前利用数学混整数规划算法需要考虑的建模思路以外，我们需要额外引入两个特殊的凸松弛约束，确保问题变为一个凸优化问题，可以被凸优化来解算。

$$
\begin{equation}
\label{eq:conv_relax_1}
\alpha\geq \frac{1}{v_{ave,i}}
\end{equation}
$$

式\eqref{eq:conv_relax_1}中，$$v_{ave,i}$$表示一个距离或者时间区间内的平均速度，等于两个速度点的代数平均值，有$$v_{ave,i}=\frac{v_i+v_{i-1}}{2}$$。$$v_i$$和$$v_{i-1}$$分别为区间内的末速度和起始速度。$$v_{ave,i}$$需要在计算运行时间和进行最大牵引力约束的时候需要用到。

$$
\begin{equation}
\label{eq:conv_relax_2}
\beta_i\geq v_i^2
\end{equation}
$$

式\eqref{eq:conv_relax_2}中，$v_i^2$为速度点的平方，在阻力方程和能量守恒方程中需要用到此项。

以上两个公式分别表示了利用凸优化来解算基本列车运行控制的两个重要的凸松弛的约束。如果将两式取为对应的等式，则公式\eqref{eq:conv_relax_2}所代表的约束变为非凸约束，公式\eqref{eq:conv_relax_1}在进行最大牵引力约束的时候，同样会出现两个变量相乘的非凸约束。如$$-P_{max}\leq v_{ave,i} F_i$$，其中$$F_i$$为列车牵引力或者制动力，$$-P_{max}$$为最大制动功率。

# 凸松弛的可行域变化
本文讨论在取了凸优化的松弛之后，这对原有的可行域会发生什么样的变化。

![Feasible Domain Change in Convex Relaxation](/images/blog/convex_relax_domain.png "Feasible Domain Change in Convex Relaxation")

如图所示，在松弛前我们认为的可行域为图中的非凸区域。在松弛之后，整个可行域扩大，变成了外面的凸的多边形。松弛后的整个可行域变为了凸域。我们总可以找到一个小方框和一个小圆和一个方框代表的某两组可行解。在原有的某一可行解中，通过将等式变为不等式，如增加$$\alpha$$，带来一组新的解。因此，我们在可行域内，总是找到任意两组解：一组解对应取等号，一个解对应在某些松弛约束中取不等号。

这里面包含了一个前提，那就是所有的变量都必须在我们预设的约束条件内，比如速度必须在有效的范围之内，这样的解才能作为可行域内的有效解。通过松弛约束把可行域扩大，但是扩大的可行域也不包含负数的速度等不可行的解，因为速度等约束对于松弛之后的可行域也是依旧存在的。在松弛后的可行域中，的确会出现违反基本物理规律的解，比如某些松弛的解会带来计算时间的误差，或者计算的变量值和实际物理问题并不相符等问题。因此，需要确保取得的最优解，能够把松弛的不等式变为等式，让原问题的解和松弛后的优化解是一样的。我们必须确保在松弛后的优化问题中，最优解一定只会在等号的约束上取得。否则得到的解很可能没有物理含义，也就不是工程优化所需要的了。

# 小结和展望
在本文中，我们介绍了两个凸优化过程中引入的松弛化方法，探讨了松弛后对可行域带来的变化。探讨了可行域在优化问题的松弛过程中，速度点的物理约束依然存在，但是却无法保证其他物理变量的物理含义，由此需要确保松弛条件在优化过程中必须被强制满足，确保还原优化问题的物理含义。

如果一定存在任何某两组解，一个为未松弛条件下取得，一个为松弛条件下取得，例如松弛了某些等式约束为不等式，是否可以保证，只要存在一组松弛约束，其对应的这组解一定比起对应的未松弛条件下取得的解更差呢？如果是的话，则可以证明，不存在一组最优解可以在松弛条件取得，进而证明最优解一定在等式条件下取得。这是凸松弛过程中必须满足的前提条件，也是未来这一研究工作的重点。
